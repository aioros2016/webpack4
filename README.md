# webpack4项目脚手架从零开始写 #

## 前言

webpack4出来也有一段时间了，之前的项目还一直用的是webpack2版本。由于工作太忙，也没有时间去熟悉v3版本的特点与优势。这次所以从4开始重新学习一下webpack的基础配置项以及最新的插件都能干些什么？


## 所用到的插件 ##

	|-- babel                                // 这个几乎是必装的，浏览器识别ES6就全靠它了
	|-- html-webpack-plugin                  // 强大的html处理器，没有不用的理由。可以生成模板，给链接添加缓存，压缩...
	|-- extract-text-webpack-plugin          // 有了它，我们就可以分离项目中的css，用link的形式来导入到页面中
	|-- optimize-css-assets-webpack-plugin   // 这个主要是用来压缩css用的
	|-- Purifycss                            // 而这个主要是用来去除冗余css的
	|-- autoprefixer                         // postcss的autoprefixer也是必装的，靠他css3前缀都不用写了
	|-- clean-webpack-plugin                 // 这个插件主要是用来执行删除某些自定义的文件夹用的
	|-- copy-webpack-plugin                  // 这个是用来做静态资源输出的，听上去是不是挺高大上的？呵呵
	|-- webpack-dev-server                   // 用来做本地虚拟服务器用的，方便调试。用webpack的人，几乎没人不用吧？


除去以上的这些插件，webpack本身也有了足够的变化，比如：
1. mode概念：分为开发模式和生产模式。线下开发用开发模式，而项目开发完毕打包则用生产模式，它会对你所有的js模块进行压缩混淆。
2. 提取公共模块：我们开发的时候又是会npm下载一些比较大的库，以前webpack打包会把这些公共库一起打进出口文件里。这样会导致出口文件异常地庞大。webpack4的新特性optimization.splitChunks则可以帮我们提取这些公共库，分别压缩打包成单个的文件来引用，这样对进一步缩小出口文件是用非常大的帮助的。
3. 支持json格式文件的导入：webpack4支持了json格式。一些简单的配置可以写在json文件里，再导入到配置文件中。


## 结语

虽然工作中很可能我们不用自己去写这些脚手架，而用哪些-cli及脚手架。但是如果能对webpack基础的配置项与插件，能有直观地了解，对于我们日常工作中一定是有益而无害的。这个简易的项目脚手架能到做到支持多页面多入口多出口。提取css代码并去除冗余代码，生成独立的文件并引入也页面。压缩HTML，css，js，自动添加css3前缀，自动的静态资源缓存管理，自动删除和复制自定义的文件夹。在虚拟服务器上实时调试并支持热重载。提取公共模块成独立的文件，进一步缩小出口文件的体积。相信了解了以上这些基础配置项之后，对于我们更好的完善工作流是有好处的。